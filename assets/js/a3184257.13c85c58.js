"use strict";(self.webpackChunktemp=self.webpackChunktemp||[]).push([[614],{246:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"MEDS-DEV/benchmark","title":"benchmark","description":"This is a work in progress. The content is subject to change as the project evolves. MEDS-DEV results, while","source":"@site/docs/MEDS-DEV/5_benchmark.mdx","sourceDirName":"MEDS-DEV","slug":"/MEDS-DEV/benchmark","permalink":"/docs/MEDS-DEV/benchmark","draft":false,"unlisted":false,"editUrl":"https://github.com/Medical-Event-Data-Standard/medical-event-data-standard.github.io/tree/main/docs/docs/MEDS-DEV/5_benchmark.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"medsDevSidebar","previous":{"title":"models","permalink":"/docs/MEDS-DEV/models"}}');var r=a(74848),n=a(28453),i=a(45283);const o={sidebar_position:5},l=void 0,c={},d=[];function u(e){const t={admonition:"admonition",p:"p",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.admonition,{type:"warning",children:(0,r.jsx)(t.p,{children:"This is a work in progress. The content is subject to change as the project evolves. MEDS-DEV results, while\nin principle reproducible, are not yet finalized."})}),"\n",(0,r.jsx)(i.A,{})]})}function p(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},24566:(e,t,a)=>{a.d(t,{A:()=>i,K:()=>n});var s=a(96148),r=a(1908);function n(e){return(0,r.Ay)("MuiDivider",e)}const i=(0,s.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},45283:(e,t,a)=>{a.d(t,{A:()=>v});var s=a(96540),r=a(46190),n=a(35124),i=a(77988),o=a(35107),l=a(14959),c=a(45587),d=a(78478),u=a(72099),p=a(38193),m=a(74848);function h(e){const[t,n]=(0,s.useState)(null);return(0,s.useEffect)((()=>{p.A.canUseDOM&&a.e(236).then(a.bind(a,91236)).then((e=>{n((()=>e.default))}))}),[]),t?(0,m.jsx)(t,{...e}):(0,m.jsx)(r.A,{})}function g({datasetFilter:e,modelFilter:t,taskFilter:a}){const[d,p]=(0,s.useState)([]),[g,v]=(0,s.useState)(!0),[f,b]=(0,s.useState)(e||""),[x,y]=(0,s.useState)(a||""),[A,j]=(0,s.useState)(t||""),[S,w]=(0,s.useState)("samples_equally_weighted");if((0,s.useEffect)((()=>{(0,u.p)().then(p).finally((()=>{v(!1)}))}),[]),g)return(0,m.jsx)(r.A,{});console.log("Loaded results:",d);const $=[...new Set(d.map((e=>e.dataset)))].sort();console.log("All datasets:",$);const k=f?d.filter((e=>e.dataset===f)):d,D=[...new Set(k.map((e=>e.task)))].sort();console.log("All tasks:",D);const M=x?k.filter((e=>e.task===x)):k,C=[...new Set(M.map((e=>e.model)))].sort();console.log("All models:",C);const E=(A?M.filter((e=>e.model===A)):M).map((e=>{const t=e.result?.[S]||{};return{x:["ROC AUC","Avg Precision","F1 Score"],y:[t.roc_auc_score??0,t.average_precision_score??0,t.f1_score??0],type:"bar",name:e.model,hovertext:`Issue: ${e.id}<br>Dataset: ${e.dataset}<br>Task: ${e.task}<br>Model: ${e.model}<br>Version: ${e.version}<br>${S}`}}));return(0,m.jsxs)("div",{children:[(0,m.jsx)(n.A,{variant:"h4",gutterBottom:!0,children:"MEDS-DEV Benchmark Leaderboard"}),(0,m.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:[(0,m.jsxs)(i.A,{size:"small",sx:{minWidth:200},children:[(0,m.jsx)(o.A,{children:"Dataset"}),(0,m.jsxs)(l.A,{value:f,label:"Dataset",onChange:e=>{b(e.target.value),y("")},children:[(0,m.jsx)(c.A,{value:"",children:(0,m.jsx)("em",{children:"All"})}),$.map((e=>(0,m.jsx)(c.A,{value:e,children:e},e)))]})]}),(0,m.jsxs)(i.A,{size:"small",sx:{minWidth:300},children:[(0,m.jsx)(o.A,{children:"Task"}),(0,m.jsxs)(l.A,{value:x,label:"Task",onChange:e=>y(e.target.value),children:[(0,m.jsx)(c.A,{value:"",children:(0,m.jsx)("em",{children:"All"})}),D.map((e=>(0,m.jsx)(c.A,{value:e,children:e},e)))]})]}),(0,m.jsxs)(i.A,{size:"small",sx:{minWidth:300},children:[(0,m.jsx)(o.A,{children:"Model"}),(0,m.jsxs)(l.A,{value:A,label:"Model",onChange:e=>j(e.target.value),children:[(0,m.jsx)(c.A,{value:"",children:(0,m.jsx)("em",{children:"All"})}),C.map((e=>(0,m.jsx)(c.A,{value:e,children:e},e)))]})]}),(0,m.jsxs)(i.A,{size:"small",sx:{minWidth:250},children:[(0,m.jsx)(o.A,{children:"Metric Set"}),(0,m.jsxs)(l.A,{value:S,label:"Metric Set",onChange:e=>w(e.target.value),children:[(0,m.jsx)(c.A,{value:"samples_equally_weighted",children:"Samples Weighted"}),(0,m.jsx)(c.A,{value:"subjects_equally_weighted",children:"Subjects Weighted"})]})]})]}),(0,m.jsx)(h,{data:E,layout:{barmode:"group",title:{text:`Metric Scores${f?` for ${f}`:""}${x?` \u2013 ${x}`:""}`},xaxis:{title:{text:"Metric"}},yaxis:{title:{text:"Score"},range:[0,1]},autosize:!0},style:{width:"100%",height:"600px"},useResizeHandler:!0,config:{responsive:!0}})]})}function v({datasetFilter:e,modelFilter:t,taskFilter:a}){return(0,m.jsx)(d.A,{fallback:(0,m.jsx)("div",{children:"Loading client-side plot..."}),children:()=>(0,m.jsx)(g,{datasetFilter:e,modelFilter:t,taskFilter:a})})}},45587:(e,t,a)=>{a.d(t,{A:()=>w});var s=a(96540),r=a(34164),n=a(21362),i=a(76955),o=a(98855),l=a(26739),c=a(99640),d=a(40060),u=a(40583),p=a(59020),m=a(37313),h=a(30301),g=a(24566),v=a(96148);const f=(0,v.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const b=(0,v.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var x=a(1908);function y(e){return(0,x.Ay)("MuiMenuItem",e)}const A=(0,v.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var j=a(74848);const S=(0,l.Ay)(p.A,{shouldForwardProp:e=>(0,o.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,c.A)((({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${A.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,i.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${A.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,i.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${A.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,i.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,i.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${g.A.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${g.A.inset}`]:{marginLeft:52},[`& .${b.root}`]:{marginTop:0,marginBottom:0},[`& .${b.inset}`]:{paddingLeft:36},[`& .${f.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${f.root} svg`]:{fontSize:"1.25rem"}}}]})))),w=s.forwardRef((function(e,t){const a=(0,d.b)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:l=!1,divider:c=!1,disableGutters:p=!1,focusVisibleClassName:g,role:v="menuitem",tabIndex:f,className:b,...x}=a,A=s.useContext(u.A),w=s.useMemo((()=>({dense:l||A.dense||!1,disableGutters:p})),[A.dense,l,p]),$=s.useRef(null);(0,m.A)((()=>{i&&$.current&&$.current.focus()}),[i]);const k={...a,dense:w.dense,divider:c,disableGutters:p},D=(e=>{const{disabled:t,dense:a,divider:s,disableGutters:r,selected:i,classes:o}=e,l={root:["root",a&&"dense",t&&"disabled",!r&&"gutters",s&&"divider",i&&"selected"]},c=(0,n.A)(l,y,o);return{...o,...c}})(a),M=(0,h.A)($,t);let C;return a.disabled||(C=void 0!==f?f:-1),(0,j.jsx)(u.A.Provider,{value:w,children:(0,j.jsx)(S,{ref:M,role:v,tabIndex:C,component:o,focusVisibleClassName:(0,r.A)(D.focusVisible,g),className:(0,r.A)(D.root,b),...x,ownerState:k,classes:D})})}))},72099:(e,t,a)=>{a.d(t,{S:()=>n,p:()=>i});var s=a(86056);const r="https://raw.githubusercontent.com/Medical-Event-Data-Standard/MEDS-DEV/_web";async function n(e){const t=`${r}/entities/${e}s.json`;return(0,s.Z)(t)}async function i(){const e=`${r}/results/all_results.json`,t=function(e){if("string"!=typeof e)return"object"==typeof e&&null!==e?e:(console.warn("Unexpected input type:",typeof e),null);{const a=e.replace(/\bNaN\b/g,"null");try{return JSON.parse(a)}catch(t){return console.error("Failed to parse JSON after NaN fix:",t),null}}}(await(0,s.Z)(e));if(!t)return[];const a=t,n=[];let i=0;for(const[s,r]of Object.entries(a)){if(!r)continue;const e={id:s,...r};if(console.log(`Processing entry ${s}:`,e),n.push(e),i++,i>100){console.warn("Processed 100 entries, stopping to avoid excessive output");break}}return console.log(`Total processed entries: ${i}`),n}},78478:(e,t,a)=>{a.d(t,{A:()=>n});a(96540);var s=a(92303),r=a(74848);function n({children:e,fallback:t}){return(0,s.A)()?(0,r.jsx)(r.Fragment,{children:e?.()}):t??null}},86056:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(94335);const r=9e5;async function n(e,t=null,a=r){const n=t||e,{data:i,isFresh:o}=function(e,t=r){const a=localStorage.getItem(e);if(!a)return{data:null,isFresh:!1};try{const{data:e,timestamp:s}=JSON.parse(a);return{data:e,isFresh:Date.now()-s<t}}catch(s){return console.warn(`Cache read for ${e} failed: ${s}. Clearing...`),localStorage.removeItem(e),{data:null,isFresh:!1}}}(n,a);if(o)return i;try{const t=await async function(e){try{return(await s.A.get(e)).data}catch(t){return console.error(`Failed to fetch data from ${e}:`,t),null}}(e);return localStorage.setItem(n,JSON.stringify({data:t,timestamp:Date.now()})),t}catch(l){if(console.warn(`Failed to fetch ${e}:`,l),i)return console.warn(`Using stale cached data for ${n}`),i;throw new Error(`Failed to fetch ${e} and no cached data available.`)}}}}]);